<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fiado Tonel</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: white;
  margin: 0;
  padding: 15px;
}

h1 {
  text-align: center;
  font-size: 28px;
}

input, button {
  width: 100%;
  padding: 18px;
  margin-top: 12px;
  font-size: 18px;
  border-radius: 10px;
  border: none;
}

input {
  background: #222;
  color: white;
}

button {
  font-weight: bold;
  cursor: pointer;
}

.btn-add {
  background: #28a745;
  color: white;
}

.btn-whats {
  background: #25D366;
  color: white;
}

.cliente {
  background: #1e1e1e;
  padding: 15px;
  margin-top: 15px;
  border-radius: 10px;
  font-size: 18px;
}
</style>
</head>

<body>

<h1>FIADO TONEL</h1>

<input type="text" id="nome" placeholder="Nome do Cliente">
<input type="tel" id="telefone" placeholder="Telefone">

<button type="button" class="btn-add" onclick="adicionarCliente()">Adicionar Cliente</button>

<div id="listaClientes"></div>

      
<script>

let clientes = JSON.parse(localStorage.getItem('clientes')) || [];

function salvar() {
  localStorage.setItem('clientes', JSON.stringify(clientes));
}

function adicionarCliente() {
  let nome = document.getElementById('nome').value.trim();
  let telefone = document.getElementById('telefone').value.trim();

  if(nome === "" || telefone === "") {
    alert("Preencha nome e telefone");
    return;
  }

  clientes.push({
    nome: nome,
    telefone: telefone,
    divida: 0
  });

  salvar();

  document.getElementById('nome').value = "";
  document.getElementById('telefone').value = "";

  atualizarLista();
}

function atualizarLista() {
  let lista = document.getElementById('listaClientes');
  lista.innerHTML = "";

  clientes.forEach((cliente, index) => {
    lista.innerHTML += `
      <div class="cliente">
        <strong>${cliente.nome}</strong><br>
        Telefone: ${cliente.telefone}<br>
        Dívida: R$ ${cliente.divida.toFixed(2)}
        <br><br>
        <button onclick="adicionarDivida(${index})">Adicionar Consumo</button>
        <button onclick="pagar(${index})">Pagamento</button>
        <button onclick="whats(${index})">WhatsApp</button>
      </div>
    `;
  });
}

function adicionarDivida(index) {
  let valor = prompt("Valor do consumo:");
  if(valor && !isNaN(valor)) {
    clientes[index].divida += parseFloat(valor);
    salvar();
    atualizarLista();
  }
}

function pagar(index) {
  let valor = prompt("Valor do pagamento:");
  if(valor && !isNaN(valor)) {
    clientes[index].divida -= parseFloat(valor);
    if(clientes[index].divida < 0) clientes[index].divida = 0;
    salvar();
    atualizarLista();
  }
}

function whats(index) {
  let cliente = clientes[index];
  let mensagem = `Olá ${cliente.nome}, sua dívida é R$ ${cliente.divida.toFixed(2)}.`;
  let url = `https://wa.me/55${cliente.telefone}?text=${encodeURIComponent(mensagem)}`;
  window.open(url, '_blank');
}

atualizarLista();

</script>


</body>
</html>
