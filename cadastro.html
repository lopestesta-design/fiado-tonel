<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro de Clientes - Tonel 333</title>

<style>
body{font-family:Arial;padding:20px;background:#fff8dc;color:#5c3a00;}
.topo{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.logo{width:100px;}
.voltar{text-decoration:none;font-size:22px;color:#5c3a00;}
input,button{padding:6px;margin:5px 0;width:100%;}
.card{border:1px solid #5c3a00;padding:10px;margin:10px 0;border-radius:6px;background:#fff;}
</style>
</head>

<body>

<div class="topo">
<a href="index.html" class="voltar">‚Üê</a>
<img src="logo.png" class="logo">
</div>

<h2>Cadastro de Clientes</h2>

<input type="text" id="nome" placeholder="Nome do Cliente">
<input type="text" id="telefone" placeholder="Telefone (559999999999)">
<button onclick="salvar()">Salvar Cliente</button>

<h3>Clientes Cadastrados</h3>
<div id="listaClientes"></div>

<script>

let editandoIndex = null;

function salvar(){

    let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
    let fiados = JSON.parse(localStorage.getItem('fiados')) || [];

    let nome = document.getElementById('nome').value.trim();
    let telefone = document.getElementById('telefone').value.trim();

    if(!nome || !telefone){
        alert("Preencha nome e telefone.");
        return;
    }

    if(editandoIndex !== null){

        let nomeAntigo = clientes[editandoIndex].nome;

        clientes[editandoIndex] = {nome, telefone};

        // üî• Atualiza tamb√©m no fiado
        fiados.forEach(f=>{
            if(f.cliente === nomeAntigo){
                f.cliente = nome;
            }
        });

        localStorage.setItem('fiados', JSON.stringify(fiados));

        editandoIndex = null;

    }else{

        if(clientes.find(c=>c.nome === nome)){
            alert("Cliente j√° cadastrado.");
            return;
        }

        clientes.push({nome, telefone});
    }

    localStorage.setItem('clientes', JSON.stringify(clientes));

    document.getElementById('nome').value="";
    document.getElementById('telefone').value="";

    listar();
}

function listar(){

    let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
    let div = document.getElementById('listaClientes');
    div.innerHTML="";

    clientes.forEach((c,i)=>{

        div.innerHTML += `
        <div class="card">
        <strong>${c.nome}</strong><br>
        Tel: ${c.telefone}<br>
        <button onclick="editar(${i})">‚úè Editar</button>
        <button onclick="excluir(${i})">üóë Excluir</button>
        </div>
        `;
    });
}

function editar(i){

    let clientes = JSON.parse(localStorage.getItem('clientes')) || [];

    document.getElementById('nome').value = clientes[i].nome;
    document.getElementById('telefone').value = clientes[i].telefone;

    editandoIndex = i;
}

function excluir(i){

    if(!confirm("Excluir cliente?")) return;

    let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
    clientes.splice(i,1);

    localStorage.setItem('clientes', JSON.stringify(clientes));
    listar();
}

listar();

</script>
</body>
</html>
