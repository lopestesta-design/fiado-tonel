<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tonel 333 - Entradas</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <img src="logo.png" alt="Tonel 333">
  <h1>Entradas</h1>
</header>

<h3>Registrar Entrada</h3>
<input type="text" id="descricao" placeholder="Descrição">
<select id="forma">
  <option value="Dinheiro">Dinheiro</option>
  <option value="Pix">Pix</option>
  <option value="Débito">Débito</option>
  <option value="Crédito">Crédito</option>
</select>
<input type="number" id="valor" placeholder="Valor">
<button onclick="adicionarEntrada()">Adicionar Entrada</button>

<h3>Entradas Registradas</h3>
<div id="lista"></div>

<button onclick="exportarBackup()">Exportar Backup</button>
<input type="file" id="importar" onchange="importarBackup(this.files[0])">

<script>
let entradas = JSON.parse(localStorage.getItem("entradas")) || [];

function salvar() {
  localStorage.setItem("entradas", JSON.stringify(entradas));
  atualizarLista();
}

function carregar() {
  entradas = JSON.parse(localStorage.getItem("entradas")) || [];
  atualizarLista();
}

function adicionarEntrada() {
  let desc = document.getElementById("descricao").value.trim();
  let forma = document.getElementById("forma").value;
  let valor = parseFloat(document.getElementById("valor").value);
  if(!desc || !valor){ alert("Preencha todos os campos"); return; }

  entradas.push({descricao: desc, forma, valor, data: new Date().toLocaleDateString()});
  document.getElementById("descricao").value = "";
  document.getElementById("valor").value = "";
  salvar();
}

function atualizarLista() {
  let lista = document.getElementById("lista");
  lista.innerHTML = "";
  entradas.forEach((e,i)=>{
    lista.innerHTML += `<div class="cliente-box">
      <b>${e.descricao}</b> - ${e.forma} - R$ ${e.valor.toFixed(2)}<br>
      <small>${e.data}</small>
      <span style="float:right;cursor:pointer;color:red;" onclick="excluir(${i})">✖</span>
    </div>`;
  });
}

function excluir(i){
  if(confirm("Deseja realmente excluir esta entrada?")){
    entradas.splice(i,1);
    salvar();
  }
}

function exportarBackup(){
  const blob = new Blob([JSON.stringify(entradas)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a"); a.href = url; a.download = "backup_entradas.json"; a.click();
  URL.revokeObjectURL(url);
}

function importarBackup(file){
  const reader = new FileReader();
  reader.onload = e=>{
    entradas = JSON.parse(e.target.result);
    salvar();
  };
  reader.readAsText(file);
}

carregar();
</script>

</body>
</html>
