<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tonel 333 - Entradas</title>
<style>
body { font-family: Arial,sans-serif; background:#e6b800; color:#5c3a00; margin:0; padding:20px; }
.topo { display:flex; align-items:center; justify-content:center; width:100%; max-width:600px; margin-bottom:20px; position:relative; }
.topo img { width:80px; position:absolute; left:0; }
.topo h2 { font-size:24px; font-weight:bold; margin:0 auto; text-align:center; flex:1; }
.voltar { align-self:flex-start; padding:10px 15px; margin-bottom:20px; font-weight:900; font-size:16px; border:4px double #5c3a00; border-radius:10px; background:transparent; color:#5c3a00; text-decoration:none; cursor:pointer; }
.conteudo { width:100%; max-width:600px; }
input, select, button { width:100%; padding:12px; margin-top:10px; font-size:16px; border-radius:8px; border:none; }
input { background:#fff8dc; color:#5c3a00; }
select { background:#fff8dc; color:#5c3a00; }
button { font-weight:bold; cursor:pointer; }
.btn-add { background:#16a34a; color:white; }
.entrada { background:#fff8dc; padding:15px; margin-top:15px; border-radius:10px; }
.icon { cursor:pointer; margin-left:5px; color:#dc2626; font-weight:bold; }
</style>
</head>
<body>

<header class="topo">
<img src="logo.png" alt="Tonel 333">
<h2>Entradas</h2>
</header>

<a href="index.html" class="voltar">⬅ Voltar à Home</a>

<div class="conteudo">
<h3>Adicionar Entrada</h3>
<input type="text" id="descricaoEntrada" placeholder="Descrição">
<input type="number" id="valorEntrada" placeholder="Valor">
<input type="date" id="dataEntrada">
<select id="formaPagamentoEntrada">
  <option value="dinheiro">Dinheiro</option>
  <option value="pix">Pix</option>
  <option value="debito">Débito</option>
  <option value="credito">Crédito</option>
</select>
<input type="number" id="taxaCartaoEntrada" placeholder="Taxa % (se débito/crédito)" step="0.01">
<button class="btn-add" onclick="adicionarEntrada()">Adicionar</button>

<div id="listaEntradas"></div>
</div>

<script>
let entradas = JSON.parse(localStorage.getItem('entradas')) || [];

function atualizarEntradas() {
  let lista = document.getElementById("listaEntradas");
  lista.innerHTML = "";
  entradas.forEach((e,i)=>{
    lista.innerHTML += `
      <div class="entrada">
        ${e.data} - ${e.descricao} - R$ ${e.valor.toFixed(2)} - ${e.formaPagamento} ${e.taxa>0?`- Taxa: ${e.taxa}%`:''}
        <span class="icon" onclick="excluirEntrada(${i})">x</span>
      </div>
    `;
  });
  localStorage.setItem('entradas', JSON.stringify(entradas));
}

function adicionarEntrada() {
  let desc = document.getElementById("descricaoEntrada").value.trim();
  let val = parseFloat(document.getElementById("valorEntrada").value);
  let data = document.getElementById("dataEntrada").value || new Date().toISOString().split("T")[0];
  let forma = document.getElementById("formaPagamentoEntrada").value;
  let taxa = parseFloat(document.getElementById("taxaCartaoEntrada").value) || 0;

  if(!desc || !val) return alert("Informe descrição e valor");
  
  // aplica taxa se pagamento for débito ou crédito
  if(forma==='debito' || forma==='credito') val = val * (1 - taxa/100);
  
  entradas.push({descricao:desc, valor:val, data:data, formaPagamento:forma, taxa: taxa});
  atualizarEntradas();
}

function excluirEntrada(i) {
  if(confirm("Confirma exclusão da entrada?")) {
    entradas.splice(i,1);
    atualizarEntradas();
  }
}

document.getElementById("dataEntrada").value = new Date().toISOString().split("T")[0];

atualizarEntradas();
</script>

</body>
</html>
