<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Entradas</title>
<style>
body { font-family:Arial; padding:20px; background:#fff8dc; color:#5c3a00; }
.topo { display:flex; justify-content: space-between; align-items:center; margin-bottom:20px; }
.logo { width:100px; }
.voltar { font-size:22px; text-decoration:none; color:#5c3a00; }
input, select { width:100%; padding:8px; margin-top:5px; margin-bottom:10px; }
button { padding:10px; font-weight:bold; }
</style>
</head>
<body>

<div class="topo">
<a href="index.html" class="voltar">←</a>
<img src="logo.png" class="logo">
</div>

<h2>Registrar Venda</h2>

<form id="formEntrada">
<label>Descrição:</label>
<input type="text" id="descricao" required>

<label>Valor:</label>
<input type="number" step="0.01" id="valor" required>

<label>Forma de Pagamento:</label>
<select id="pagamento">
<option value="dinheiro">Dinheiro</option>
<option value="pix">Pix</option>
<option value="debito">Débito</option>
<option value="credito">Crédito</option>
<option value="fiado">Fiado</option>
</select>

<label>Cliente (se for fiado):</label>
<select id="cliente"></select>

<label>Data:</label>
<input type="date" id="data">

<button type="submit">Salvar</button>
</form>

<script>
document.getElementById("data").value = new Date().toISOString().slice(0,10);

function carregarClientes(){
    let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
    let select = document.getElementById('cliente');
    select.innerHTML = "<option value=''>Selecione</option>";
    clientes.forEach(c=>{
        select.innerHTML += `<option value="${c.nome}">${c.nome}</option>`;
    });
}
carregarClientes();

document.getElementById('formEntrada').addEventListener('submit', function(e){
    e.preventDefault();

    let descricao = descricao.value;
    let valor = parseFloat(document.getElementById('valor').value);
    let pagamento = pagamento.value;
    let cliente = cliente.value;
    let data = data.value;

    let entradas = JSON.parse(localStorage.getItem('entradas')) || [];
    entradas.push({descricao, valor, pagamento, cliente, data});
    localStorage.setItem('entradas', JSON.stringify(entradas));

    // SE FOR FIADO
    if(pagamento === "fiado" && cliente){
        let fiados = JSON.parse(localStorage.getItem('fiados')) || [];
        fiados.push({cliente, valor, saldo:valor, data});
        localStorage.setItem('fiados', JSON.stringify(fiados));
    }

    alert("Venda registrada!");
    this.reset();
    document.getElementById("data").value = new Date().toISOString().slice(0,10);
});
</script>

</body>
</html>
